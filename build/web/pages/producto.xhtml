<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../templates/template.xhtml">

            <ui:define name="content">
                <h:form id="frmProductoResult">
                    <p:growl id="msg" showDetail="true"/>
                    <p:panel id="pnlProductoResult">
                        <p:dataTable id="tblProductoResult"  rows="10" paginator="true"
                                     value="#{productoController.productos}" var="p"
                                     paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15">
                            <f:facet name="header">
                                <p:outputLabel>
                                    LISTA DE PRODUCTOS
                                </p:outputLabel>
                                <p:commandButton value="Nuevo producto"
                                                 action="#{productoController.setNew()}"
                                                 update=":frmProd:idDlgProducto"
                                                 oncomplete="PF('dlgProducto').show()"
                                                 style="float: right"/>
                            </f:facet>

                            <p:column headerText="Codigo">
                                <h:outputText value="#{p.codigo}"/>
                            </p:column>
                            <p:column headerText="Nombre">
                                <h:outputText value="#{p.nombre}"/>
                            </p:column>
                            <p:column headerText="Cantidad">
                                <h:outputText value="#{p.cantidad}"/>
                            </p:column>
                            <p:column headerText="Costo">
                                <h:outputText value="#{p.costo}"/>
                            </p:column>
                            <p:column headerText="Precio">
                                <h:outputText value="#{p.precio}"/>
                            </p:column>
                            <p:column headerText="">
                                <div style="text-align: center;">
                                    <p:commandButton icon="fa fa-pencil"
                                                     update=":frmProd:idDlgProducto"
                                                     oncomplete="PF('dlgProducto').show()"
                                                     title="Editar registro"
                                                     action="#{productoController.setUpdate(p)}">
                                    </p:commandButton>
                                    &nbsp;
                                    <p:commandButton icon="fa fa-trash"
                                                     title="Eliminar registro"
                                                     />
                                </div>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                </h:form>

                <h:form id="frmProd">
                    <p:dialog header="#{productoController.accion} PRODUCTO"
                              closable="true"
                              widgetVar="dlgProducto" modal="true"
                              id="idDlgProducto"
                              showEffect="fold" hideEffect="fold">
                        <p:panelGrid columns="2">
                            <p:outputLabel value="CODIGO"/>
                            <p:inputText value="#{productoController.producto.codigo}" disabled="true"/>
                            <p:outputLabel value="NOMBRE"/>
                            <p:inputText value="#{productoController.producto.nombre}"/>
                            <p:outputLabel value="CANTIDAD"/>
                            <p:spinner value="#{productoController.producto.cantidad}"/>
                            <p:outputLabel value="COSTO"/>
                            <p:inputNumber value="#{productoController.producto.costo}" symbol="S/. "
                                           emptyValue="0.00"/>
                            <p:outputLabel value="PRECIO"/>
                            <p:inputNumber value="#{productoController.producto.precio}" symbol="S/. "
                                           emptyValue="0.00"/>
                            <f:facet name="footer">
                                <p:commandButton value="GUARDAR"
                                                 icon="fa fa-floppy-o"
                                                 update=":frmProductoResult:tblProductoResult :frmProductoResult:msg"
                                                 onclick="PF('dlgProducto').hiden()"
                                                 action="#{productoController.doExecute()}"/>
                            </f:facet>
                        </p:panelGrid>
                    </p:dialog>
                </h:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
